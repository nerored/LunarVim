local M = {}

local banner = {
  "⠀⠀⠀⠀⠀⠀⠀⠀⣴⡿⠛⠻⣿⣶⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣤⣶⣶⣿⠉⠘⣿⣄⠀⠀⠀⠀⠀⠀",
  "⠀⠀⠀⠀⠀⠀⠀⠀⣿⠃⠀⢀⡀⠀⠙⣿⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⡀⣿⣿⣷⣤⣤⣤⣀⠀⣠⣶⠟⠉⠀⠀⠀⠀⣤⠀⠀⢻⣷⠀⠀⠀⠀⠀",
  "⠀⠀⠀⠀⠀⠀⠀⢸⣿⠀⠀⣿⣿⠀⠀⠀⢻⣷⠀⠀⠀⠀⠀⠀⣴⣷⣱⣷⣥⣠⣽⣷⣥⡀⣀⠈⠙⣿⣿⣿⣿⣿⡍⠉⣷⣤⣀⠀⠀⢀⣿⠀⠀⠀⢻⣧⠀⠀⠀⠀",
  "⠀⠀⠀⠀⠀⠀⠀⢸⡏⠀⠀⢹⣿⠀⠀⠀⢀⣴⣿⣽⡀⢀⣤⣷⣿⡿⢛⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣀⠉⢷⡘⠛⠀⠀⠀⢸⣿⠀⠀⠀⠀",
  "⠀⠀⠀⠀⠀⠀⠀⣿⡇⠀⠀⠀⠀⣠⣶⣿⣠⣩⣿⣿⣿⣿⡿⣿⣹⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣁⣿⡄⠀⠀⢸⣿⠀⠀⠀⠀",
  "⠀⠀⠀⠀⠀⠀⠀⣿⠇⠀⣠⣿⣿⠁⠉⣽⣿⣿⣿⣿⣿⣿⣿⣿⡏⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⣍⠀⣝⣤⠸⣿⠀⠀⠀⠀",
  "⠀⠀⠀⠀⠀⠀⠀⢿⡇⣿⠙⠙⢛⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢻⠛⠛⠉⠙⠉⠉⠉⠉⠉⠉⠛⣿⣿⣿⣿⣿⣿⠛⠿⣿⣿⣿⢿⣿⡀⠀⣿⣦⠀⠀⠀⠀",
  "⠀⠀⠀⠀⠀⠀⠀⠉⠉⢹⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣟⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⣿⢿⣿⣿⣿⣿⣻⣿⣿⣿⡟⣿⣿⣷⠙⣿⣦⠀⠀",
  "⠀⠀⠀⠀⠀⠀⢐⣝⢹⣿⣿⣿⣿⠛⠛⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣄⠀",
  "⠀⠀⠀⢘⢙⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣦⣴⠶⠷⠶⠶⣦⣄⠀⠀⠀⠀⠀⠀⣀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇",
  "⠀⢠⣽⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⠀⠀⠀⠀⠀⠀⠀⠀⠈⠻⡄⢀⣾⠋⠀⠀⠀⠙⠛⠻⠛⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇",
  "⣸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⠷⠀⠀⠀⠀⠀⠀⣤⣤⡀⠀⠙⣿⠀⠀⠀⠀⠀⠀⠀⢀⣤⣄⠀⠙⡝⠛⣿⣿⣿⣿⣿⡟⠃",
  "⠙⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢻⠟⠻⠟⠁⠀⠀⠀⠀⠀⢸⣿⣿⣿⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⡗⠀⣿⠀⠉⠙⣿⣿⣿⠟⠀",
  "⠙⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠉⠸⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠁⠀⠀⢸⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡿⠀⠀⠀⠉⣿⠋⠀⠀",
  "⠈⠙⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠛⠉⠀⠀⠀⢻⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⠟⠹⣦⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⠁⠀⠀⠀⠀⣿⠀⠀⠀",
  "⠀⠙⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⣿⠿⢿⣿⣿⣿⣶⣶⣤⣤⣤⣄⣉⢷⣤⣀⣀⣀⣀⣠⣤⡶⠚⠉⠀⠀⠀⠀⠙⢶⣤⣄⣀⣤⣤⣴⣿⣯⣶⣶⣶⣶⣿⡛⠻⠋⠀⠀",
  "⠀⠈⠈⠛⠿⣿⣿⣿⡇⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣿⣿⣿⣿⣦⣀⣀⣭⣭⣿⣿⣾⠁⠀⠀⠀⠀⠀⠀⣶⠀⠀⠀⠀⠀⢹⣶⣶⣤⣤⣤⣿⣿⣿⣿⣿⣿⣶⡄⠀⠀",
  "⠀⠀⠀⠀⠀⠀⠈⠻⣇⢀⣀⣤⣤⣶⣿⣿⠿⠿⠛⠛⠙⠙⠙⢙⣆⣤⡶⠛⠉⢿⣷⠀⠀⠀⠀⠀⣀⣴⠛⣦⣀⠀⠀⣠⡾⠀⠀⠙⣾⣿⢛⡙⠛⠛⠻⢿⣿⣷⠀⠀",
  "⠀⠀⠀⠀⠀⠴⠛⠛⣹⡅⠀⠀⠀⣿⣿⣿⣿⣿⣿⣽⣿⣿⠿⠛⠃⠀⠀⠀⠀⠀⠀⠉⠉⠙⠉⠉⠀⠀⠀⠀⠀⠀⠈⠀⠀⠀⠀⠀⣿⣽⠛⢿⣿⡍⣿⣿⡿⠀⠀⠀",
  "⠀⠀⠀⠀⣤⠒⠉⠉⠘⣿⡀⠀⠀⠈⣿⣽⣿⡿⠟⠙⠙⣿⣿⠿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣿⣿⣿⣿⣙⠿⣿⠁⠀⠀⠀",
  "⠀⢀⠖⠉⣧⠀⠀⠀⠀⣷⠙⣦⣤⡶⠛⠉⠉⠛⠛⠛⠛⠛⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠉⢀⡾⠁⠈⠛⣤⠀",
  "⣴⠁⠀⠀⠀⢳⠀⠀⠀⣼⣿⠿⠻⣤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⡾⠉⠀⠀⠀⠀⠀⠀",
  "⣤⣄⠀⠀⠀⠀⠙⣶⠛⠀⠀⠳⣄⠀⢙⣶⣤⣀⣀⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣴⣾⣿⣦⣶⣦⠀⠀⠀⠀⠀⠀",
  "⠀⠀⠀⠙⣶⡟⠁⠈⢳⠀⠀⠀⠀⡽⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣶⣶⣤⣀⣀⣴⣿⣿⣿⣿⣿⣿⣿⠟⠀⠀⠀⠀⠀⠀",
  "⠀⠀⢀⠟⠀⠈⣦⠀⠀⠙⣄⠀⣿⣿⣿⣿⣦⠛⣿⣿⣿⣿⣿⣏⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠛⣥⣶⣿⡀⠀⠀⠀⠀⠀⠀",
  "⠀⢠⠋⠀⠀⠀⠘⡄⠀⠀⠈⣿⣿⣿⣿⣿⣿⣷⢻⣿⣿⣿⣿⣿⣿⣿⣶⣭⣭⣛⣛⠻⠿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⣋⣴⣾⠋⣾⣿⣿⣿⣿⣿⡄⠀⠀⠀⠀⠀",
  "⣆⡏⠀⠀⠀⠀⠀⡇⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣍⠻⠟⣵⣿⣿⣿⣿⠏⣿⣿⣿⣿⣿⣿⣿⣿⡆⠀⠀⠀⠀",
}

M.banner_small = {
  "███╗   ██╗███████╗███████╗████████╗███╗   ██╗███████╗████████╗",
  "████╗  ██║██╔════╝██╔════╝╚══██╔══╝████╗  ██║██╔════╝╚══██╔══╝",
  "██╔██╗ ██║█████╗  ███████╗   ██║   ██╔██╗ ██║█████╗     ██║   ",
  "██║╚██╗██║██╔══╝  ╚════██║   ██║   ██║╚██╗██║██╔══╝     ██║   ",
  "██║ ╚████║███████╗███████║   ██║   ██║ ╚████║███████╗   ██║   ",
  "╚═╝  ╚═══╝╚══════╝╚══════╝   ╚═╝   ╚═╝  ╚═══╝╚══════╝   ╚═╝   ",
}

function M.get_sections()
  local header = {
    type = "text",
    val = function()
      local alpha_wins = vim.tbl_filter(function(win)
        local buf = vim.api.nvim_win_get_buf(win)
        return vim.api.nvim_get_option_value("filetype", { buf = buf }) == "alpha"
      end, vim.api.nvim_list_wins())

      if vim.api.nvim_win_get_height(alpha_wins[#alpha_wins]) < 36 then
        return M.banner_small
      end
      return banner
    end,
    opts = {
      position = "center",
      hl = "Number",
    },
  }

  local text = require "lvim.interface.text"
  local lvim_version = require("lvim.utils.git").get_lvim_version()

  local footer = {
    type = "text",
    val = text.align_center({ width = 0 }, {
      "",
      "falconstudio-nero",
      lvim_version,
    }, 0.5),
    opts = {
      position = "center",
      hl = "Number",
    },
  }

  local buttons = {
    opts = {
      hl_shortcut = "Comment",
      spacing = 1,
    },
    entries = {
      { "f", lvim.icons.ui.FindFile .. "  查找文件", "<CMD>Telescope find_files<CR>" },
      { "n", lvim.icons.ui.NewFile .. "  创建文件", "<CMD>ene!<CR>" },
      { "p", lvim.icons.ui.Project .. "  查找项目 ", "<CMD>Telescope projects<CR>" },
      { "r", lvim.icons.ui.History .. "  最近浏览", ":Telescope oldfiles <CR>" },
      { "t", lvim.icons.ui.FindText .. "  查找文本", "<CMD>Telescope live_grep<CR>" },
      {
        "c",
        lvim.icons.ui.Gear .. "  编辑设置",
        "<CMD>edit " .. require("lvim.config"):get_user_config_path() .. " <CR>",
      },
      { "q", lvim.icons.ui.Close .. "  退出程序", "<CMD>quit<CR>" },
    },
  }
  return {
    header = header,
    buttons = buttons,
    footer = footer,
  }
end

return M
